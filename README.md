# A Simple Smart Contract

This project demonstrates creation of a simple smart contract using Solidity on Ethereum blockchain. It uses `truffle` framework as development and testing environment for the blockchain.

The is a Node.JS project which uses `truffle` to build, test and deploy the smart contracts, as well as provides backend environment for the DApp. It also provides connectivity with the frontend, which is used to interact with the blockchain and smart contracts.

The frontend is a simple HTML page, along with some vanilla JavaScript. It uses `web3` library to communicate with the blockchain.

## Project Structure

The project structure is as follows:

```
/
  contracts
    Migrations.sol*
    SimpleSmartContract.sol
    ...
  migrations
    1_initial_migration.sol*
    2_simple_smart_contract.js
  public
    bundle.js
    index.html
    ...
  test
    simpleSmartContract.js
    ...
  package-lock.json
  package.json
  Readme.md
  truffle-config.js*
```

The files marked with `*` are generated by `truffle` when the project is initialized with `truffle init`. They must be kept intact in order to avoid any future mishaps.

The `contracts' folder holds the smart contracts to be deployed and used. These contracts are written in Solidity, thus having `.sol` extension

The `migrations` folder holds the code required for compiling and deploying the contracts. Once compiled, they generate smart contract artifacts, which are JSON objects representing the contract.

The `public` folder is the one used for frontend app. The website to be displayed to the user is located in this folder and served using `serve` package.

The `test` folder is useful for testing the smart contracts. The tests are necessary to find & mitigate potenstial risks before the app is deployed onto the blockchain.

## Installation

- Install `truffle` as a global repository

  ```bash
  npm install -g truffle
  ```

- Clone the repository

  ```bash
  git clone https://github.com/3atharvkurdukar/ethereum-dapps.git
  ```

- Install dependencies
  ```bash
  npm install
  ```

## Development

To start the development server, enter the following command:

```bash
truffle develop
```

OR

```bash
npm run dev
```

This will create a development environment. A local blockchain will be created, along with 10 private key & public key combinations to test with.
The development enviropnment allows us to deploy smart contracts to the local blockchain without signing them.

Once the blockchain has been created, a prompt will appear:

```bash
truffle(develop)>
```

The commands related to the development can be entered in the prompt.

In order to deploy the smart contract, enter:

```bash
truffle(develop)> migrate --hard
```

This will build the smart contract artifacts & deploy them on the blockchain. The `--hard` flag ensures that the artifacts generated by the previous folder are replaced by new artifacts.

## Testing

To test the smart contract, enter:

```bash
truffle test
```

OR

```bash
npm test
```

## Frontend

To start the frontend server, we are using `serve` package. In order to start the server, enter:

```bash
serve public/
```

OR

```bash
npm start
```
